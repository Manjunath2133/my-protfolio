{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const[auth,setAuth]=useState(null);// null = loading, false = not auth, true = auth\nuseEffect(()=>{const checkAuth=async()=>{try{const res=await fetch('http://localhost:5000/api/auth/verify',{method:'GET',credentials:'include'});const data=await res.json();setAuth(res.ok);}catch(err){console.error(err);setAuth(false);}};checkAuth();},[]);if(auth===null)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// show loader while checking\nif(!auth)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","auth","setAuth","checkAuth","res","fetch","method","credentials","data","json","ok","err","console","error","to"],"sources":["D:/Web Development/my-portfolio/src/assets/components/ProtectedRoute.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const [auth, setAuth] = useState(null); // null = loading, false = not auth, true = auth\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const res = await fetch('http://localhost:5000/api/auth/verify', {\r\n          method: 'GET',\r\n          credentials: 'include',\r\n        });\r\n        const data = await res.json();\r\n        setAuth(res.ok);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setAuth(false);\r\n      }\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  if (auth === null) return <div>Loading...</div>; // show loader while checking\r\n  if (!auth) return <Navigate to=\"/login\" />;\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAClC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAAE;AAExCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,uCAAuC,CAAE,CAC/DC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,SACf,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAC7BP,OAAO,CAACE,GAAG,CAACM,EAAE,CAAC,CACjB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBT,OAAO,CAAC,KAAK,CAAC,CAChB,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,IAAI,GAAK,IAAI,CAAE,mBAAOJ,IAAA,QAAAG,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AACjD,GAAI,CAACC,IAAI,CAAE,mBAAOJ,IAAA,CAACF,QAAQ,EAACmB,EAAE,CAAC,QAAQ,CAAE,CAAC,CAC1C,MAAO,CAAAd,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}